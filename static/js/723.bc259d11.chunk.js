"use strict";(self.webpackChunkjourney_sick=self.webpackChunkjourney_sick||[]).push([[723],{36723:function(e,t,n){n.r(t),n.d(t,{default:function(){return ge}});var i=n(74165),r=n(1413),s=n(15861),a=n(29439),c=n(64554),o=n(4567),l=n(5849),d=n(71652),x=n(60222),u=n(7792),p=n(71285),h=n(31243),f=n(23197),m=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.Z.get("https://opentripmap-places-v1.p.rapidapi.com/en/places/geoname",{params:{name:t},headers:{"X-RapidAPI-Key":"229c00f068msh28734b3c30c4aacp115d1ejsn33650bd2adfa","X-RapidAPI-Host":"opentripmap-places-v1.p.rapidapi.com"}});case 3:return n=e.sent,e.abrupt("return",n.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Z=n(97892),j=n.n(Z),g=n(83027),b=n.n(g),y=n(72791),k=n(57689),v=n(95568),w=n(80184);j().extend(b());var D=function(){var e=(0,k.s0)(),t=(0,y.useState)({estimateStartDate:j()(),estimateEndDate:j()().add(1,"day"),endLongitude:"",endLatitude:"",endLocationName:""}),n=(0,a.Z)(t,2),h=n[0],Z=n[1],g=(0,y.useRef)();function b(){return(b=(0,s.Z)((0,i.Z)().mark((function t(){var n,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===g.current.value){t.next=8;break}return t.next=3,m(g.current.value);case 3:return n=t.sent,t.next=6,p.YO.createUser((0,r.Z)((0,r.Z)({},h),{},{endLocationName:n.name,endLongitude:n.lon.toString(),endLatitude:n.lat.toString()}));case 6:null!==(s=t.sent)&&e("/tripUpdate/"+s);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(c.Z,{children:(0,w.jsxs)(c.Z,{display:"flex",alignItems:"center",flexDirection:"column",paddingY:5,borderRadius:"5px",children:[(0,w.jsxs)(c.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,w.jsx)(o.Z,{variant:"h2",children:"T\u1ea1o h\xe0nh tr\xecnh m\u1edbi"}),(0,w.jsx)(c.Z,{width:"60%",border:"1px solid black",mt:1})]}),(0,w.jsx)(c.Z,{mt:2,children:(0,w.jsxs)(c.Z,{display:"flex",flexDirection:"column",gap:2,children:[(0,w.jsx)(c.Z,{width:"100%",sx:{borderRadius:"8px"},children:(0,w.jsx)(v.default,{apiKey:f.tH,ref:g,className:"custom-input",options:{types:["geocode","establishment"],componentRestrictions:{country:"vn"}}})}),(0,w.jsxs)(c.Z,{display:"flex",gap:2,children:[(0,w.jsx)(d._,{dateAdapter:u.y,dateLibInstance:j().utc,children:(0,w.jsx)(x.M,{sx:{background:"white",borderRadius:"8px"},name:"startDate",label:"Ng\xe0y \u0111i",value:j().utc(h.estimateStartDate),onChange:function(e){var t=(0,r.Z)((0,r.Z)({},h),{},{estimateStartDate:e});Z(t)}})}),(0,w.jsx)(d._,{dateAdapter:u.y,dateLibInstance:j().utc,children:(0,w.jsx)(x.M,{sx:{background:"white",borderRadius:"8px"},name:"endDate",label:"Ng\xe0y \u0111\u1ebfn",value:j().utc(h.estimateEndDate),onChange:function(e){var t=(0,r.Z)((0,r.Z)({},h),{},{estimateEndDate:e});Z(t)}})})]}),(0,w.jsx)(c.Z,{display:"flex",justifyContent:"center",children:(0,w.jsx)(l.Z,{type:"button",variant:"contained",sx:{padding:"10px 30px",fontSize:"20px",backgroundColor:"#168843"},onClick:function(){return function(){return b.apply(this,arguments)}()},children:"B\u1eaft \u0110\u1ea7u"})})]})})]})})})},S=n(41672),C=function(){return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(c.Z,{sx:{backgroundImage:"url(".concat(S,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"5vh",padding:10}})})},I=n(81153),H=n(89164),M=n(43236),A=n(11087),L=n(60561),N=n(67430),R=n(4942),W=n(45987),B=n(53915),E=n(36314),_=n(60220),G=n(68610),V=n(4841),P=n(53767),U=n(22492),T=n(13967),X=n(59669),Y=n(77005),z=n(24883),F=(n(3137),n(27222)),J=n(48347),q=n(65171),O=["children","value","index"];function K(e){var t=e.children,n=e.value,i=e.index,s=(0,W.Z)(e,O);return(0,w.jsx)("div",(0,r.Z)((0,r.Z)({role:"tabpanel",hidden:n!==i,id:"profile-tabpanel-".concat(i),"aria-labelledby":"profile-tab-".concat(i)},s),{},{children:n===i&&t}))}var Q=function(){var e=(0,J.T)(),t=(0,k.s0)(),n=(0,T.Z)(),l=(0,J.C)(q.HF);(0,y.useEffect)((function(){localStorage.getItem("access_token_user")&&e((0,q.ts)())}),[]);var d=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("access_token_user"),t("/");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=(0,y.useRef)(null),u=(0,y.useState)(!1),p=(0,a.Z)(u,2),h=p[0],f=p[1],m=function(e){x.current&&x.current.contains(e.target)||f(!1)},Z=(0,y.useState)(0),j=(0,a.Z)(Z,2),g=j[0];j[1];return(0,w.jsxs)(c.Z,{sx:{flexShrink:0,ml:.75},children:[(0,w.jsx)(B.Z,{sx:{p:.25,bgcolor:h?"grey.300":"transparent",borderRadius:1,"&:hover":{bgcolor:"secondary.lighter"}},"aria-label":"open profile",ref:x,"aria-controls":h?"profile-grow":void 0,"aria-haspopup":"true",onClick:function(){f((function(e){return!e}))},children:(0,w.jsx)(E.Z,{direction:"row",spacing:2,alignItems:"center",sx:{p:.5},children:(0,w.jsx)(_.Z,{alt:"profile user",src:F,sx:{width:32,height:32}})})}),(0,w.jsx)(G.Z,{placement:"bottom-end",open:h,anchorEl:x.current,role:void 0,transition:!0,disablePortal:!0,popperOptions:{modifiers:[{name:"offset",options:{offset:[0,9]}}]},children:function(e){var t=e.TransitionProps;return(0,w.jsx)(X.h2,(0,r.Z)((0,r.Z)({type:"fade",in:h},t),{},{children:h&&(0,w.jsx)(V.Z,{sx:(0,R.Z)({boxShadow:n.customShadows.z1,width:290,minWidth:240,maxWidth:290},n.breakpoints.down("md"),{maxWidth:250}),children:(0,w.jsx)(P.Z,{onClickAway:m,children:(0,w.jsxs)(Y.A,{elevation:0,border:!1,content:!1,children:[(0,w.jsx)(U.Z,{sx:{px:2.5,pt:3},children:(0,w.jsx)(I.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",children:(0,w.jsx)(I.ZP,{item:!0,children:(0,w.jsxs)(E.Z,{direction:"row",spacing:1.25,alignItems:"center",children:[(0,w.jsx)(_.Z,{alt:"profile user",src:F,sx:{width:32,height:32}}),(0,w.jsxs)(E.Z,{children:[(0,w.jsx)(o.Z,{variant:"h6",children:l.name}),(0,w.jsx)(o.Z,{variant:"body2",color:"textSecondary",children:l.role})]})]})})})}),h&&(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(K,{value:g,index:0,dir:n.direction,children:(0,w.jsx)(z.Z,{handleLogout:d})})})]})})})}))}})]})},$=[{key:1,display:"Trang ch\u1ee7",link:"/"},{key:2,display:"\u0110i\u1ec3m d\u1eebng ch\xe2n",link:"/maintenance"},{key:3,display:"C\u1ea9m nang \u0111i ph\u01b0\u1ee3t",link:"/maintenance"},{key:4,display:"Qu\u1ea3n l\xed chuy\u1ebfn \u0111i",link:"/tripManagement"}],ee=function(){return(0,w.jsxs)(c.Z,{sx:{backgroundImage:"url(".concat(L,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",height:"50vh",paddingX:10,paddingY:5},children:[(0,w.jsxs)(I.ZP,{container:!0,sx:{display:"flex"},children:[(0,w.jsx)(I.ZP,{item:!0,xs:12,sm:2,children:(0,w.jsxs)(H.Z,{className:"d-flex",sx:{alignItems:"center",gap:3},children:[(0,w.jsx)(c.Z,{children:(0,w.jsx)("img",{src:N.Z})}),(0,w.jsx)(o.Z,{color:"#168843",fontSize:"25px",fontWeight:700,children:"Journey Sick"})]})}),(0,w.jsxs)(I.ZP,{item:!0,xs:12,sm:9,children:[(0,w.jsx)(c.Z,{sx:{display:"flex",justifyContent:"flex-start",p:1,m:1,borderRadius:1},children:$.map((function(e,t){return(0,w.jsx)(c.Z,{marginRight:3,children:(0,w.jsx)(A.rU,{style:{fontWeight:600,fontSize:"20px",textDecoration:"none",color:"black"},to:e.link,children:e.display})},t)}))}),(0,w.jsx)(M.Z,{component:"nav",sx:{display:"flex",height:"100%",flexDirection:"row"}})]}),(0,w.jsx)(I.ZP,{item:!0,xs:12,sm:1,marginTop:2,children:(0,w.jsx)(Q,{})}),(0,w.jsx)(I.ZP,{item:!0,xs:2,sx:{display:"flex",alignItems:"center",flexDirection:"row-reverse"}})]}),(0,w.jsxs)(H.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,w.jsx)(o.Z,{component:"h1",fontSize:"60px",fontWeight:900,children:"Journey Sick"}),(0,w.jsx)(o.Z,{component:"h3",fontSize:"20px",fontWeight:400,children:"Kh\xf4ng ph\u1ea3i ai lang thang c\u0169ng l\xe0 ng\u01b0\u1eddi \u0111i l\u1ea1c"})]})]})},te=n(91766),ne=function(){return(0,w.jsx)(c.Z,{width:"100%",children:(0,w.jsxs)(c.Z,{display:"flex",alignItems:"center",gap:5,width:"100%",children:[(0,w.jsxs)(c.Z,{width:"30%",children:[(0,w.jsx)(o.Z,{variant:"h2",textTransform:"uppercase",children:"G\u1ee3i \xfd chuy\u1ebfn \u0111i"}),(0,w.jsx)(o.Z,{variant:"h5",textTransform:"uppercase",children:"C\xe1c \u0111\u1ecba \u0111i\u1ec3m n\u1ed5i ti\u1ebfng"})]}),(0,w.jsx)(c.Z,{width:"70%",children:(0,w.jsx)(c.Z,{sx:{backgroundColor:"#D1D1D1"},width:"100%",children:(0,w.jsxs)(te.Z,{children:[(0,w.jsx)(te.Z.Item,{children:(0,w.jsx)(c.Z,{children:(0,w.jsx)(c.Z,{width:"100%",children:(0,w.jsx)("img",{src:"https://plus.unsplash.com/premium_photo-1684338795288-097525d127f0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyNXx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=60",style:{width:"100%"}})})})}),(0,w.jsx)(te.Z.Item,{children:(0,w.jsx)(c.Z,{children:(0,w.jsx)(c.Z,{children:(0,w.jsx)("img",{src:"https://plus.unsplash.com/premium_photo-1684338795288-097525d127f0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyNXx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=60",style:{width:"100%"}})})})}),(0,w.jsx)(te.Z.Item,{children:(0,w.jsx)(c.Z,{children:(0,w.jsx)(c.Z,{children:(0,w.jsx)("img",{src:"https://plus.unsplash.com/premium_photo-1684338795288-097525d127f0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyNXx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=60",style:{width:"100%"}})})})})]})})})]})})},ie=n(88588),re=n(81374),se=n(56694),ae=n(93006),ce=n(5574),oe=n(77386),le=n(4899),de=n(31701),xe=n(65661),ue=n(11968),pe=n.n(ue),he=n(75985),fe=(n(89731),n(3626)),me={getByIdUser:function(e){var t="/feedbacks/".concat(e);return fe.Z.get(t)},createUser:function(e){return fe.Z.post("/feedbacks",e)},updateUser:function(e){return fe.Z.put("/feedbacks",e)},increaseLike:function(e){return fe.Z.put("/feedbacks/increase-like",e)}},Ze=function(e){var t=(0,J.C)(q.HF),n=t.name.toString().substring(0,1).toUpperCase(),d=(0,k.s0)(),x=(0,y.useState)(!1),u=(0,a.Z)(x,2),p=u[0],h=u[1],f=(0,y.useState)({feedbackId:e.item.feedbackId,feedbackDescription:e.item.feedbackDescription,rate:e.item.rate,locationName:e.item.endLocationName,tripId:e.item.tripId,userId:t.userId}),m=(0,a.Z)(f,2),Z=m[0],j=m[1],g=function(e){d("/tripUpdate/".concat(e))},b=function(){h(!1)},v=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(!1),0!==Z.feedbackId){e.next=7;break}return e.next=4,me.createUser(Z);case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,me.updateUser(Z);case 9:t=e.sent;case 10:e.t0=t.Code,e.next="G001"===e.t0?13:"U001"===e.t0?14:"I001"===e.t0?15:"V001"===e.t0?16:17;break;case 13:case 14:case 15:case 16:return e.abrupt("return",he.Am.error(t.Message));case 17:t>0&&he.Am.success("C\u1ea3m \u01a1n b\u1ea1n \u0111\xe3 \u0111\xe1nh gi\xe1!");case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,w.jsxs)(ie.Z,{sx:{width:"370px",height:"400px"},children:[(0,w.jsxs)(re.Z,{onClick:function(){return g(e.item.tripId)},children:[(0,w.jsxs)(l.Z,{sx:{alignSelf:"flex-end",marginTop:0,position:"absolute",right:0,width:"15px",minWidth:"140px"},variant:"contained",disableElevation:!0,color:"error",children:["ACTIVE"===e.item.tripStatus&&"\u0110ang ho\u1ea1t \u0111\u1ed9ng","CLOSED"===e.item.tripStatus&&"H\u1ebft h\u1ea1n"]}),(0,w.jsx)(c.Z,{sx:{backgroundImage:"url(https://plus.unsplash.com/premium_photo-1684338795288-097525d127f0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyNXx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=60)"}}),(0,w.jsx)("img",{src:"https://plus.unsplash.com/premium_photo-1684338795288-097525d127f0?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxlZGl0b3JpYWwtZmVlZHwyNXx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=60",style:{width:"100%"}})]}),(0,w.jsx)(re.Z,{children:(0,w.jsxs)(U.Z,{children:[(0,w.jsxs)(o.Z,{variant:"h5",component:"div",onClick:function(){return g(e.item.tripId)},children:["Chuy\u1ebfn \u0111i t\u1edbi ",e.item.endLocationName]}),(0,w.jsxs)(c.Z,{display:"flex",alignItems:"center",gap:2,mt:2,children:[(0,w.jsx)(c.Z,{width:"25px",sx:{aspectRatio:"1/1",backgroundColor:"black",color:"white"},display:"flex",alignItems:" center",justifyContent:"center",border:"1px solid black",borderRadius:"50%",children:(0,w.jsx)(o.Z,{children:n})}),(0,w.jsxs)(o.Z,{onClick:function(){return g(e.item.tripId)},children:[e.item.estimateStartDateStr," -"," ",e.item.estimateEndDateStr]}),"CLOSED"===e.item.tripStatus&&(0,w.jsx)(l.Z,{sx:{right:0},variant:"outlined",onClick:function(){h(!0)},children:"\u0110\xe1nh gi\xe1"})]})]})}),(0,w.jsxs)(ce.Z,{open:p,onClose:b,sx:{"& .MuiDialog-paper":{width:"450px"}},children:[(0,w.jsx)(xe.Z,{children:"\u0110\xe1nh gi\xe1"}),(0,w.jsxs)(le.Z,{children:[(0,w.jsx)(de.Z,{children:"C\u1ea3m \u01a1n b\u1ea1n \u0111\xe3 tr\u1ea3i nghi\u1ec7m chuy\u1ebfn \u0111i c\xf9ng ch\xfang t\xf4i. Li\u1ec7u b\u1ea1n c\xf3 th\u1ec3 chia s\u1ebb c\u1ea3m ngh\u0129 v\u1ec1 chuy\u1ebfn \u0111i v\u1eeba r\u1ed3i \u0111\u01b0\u1ee3c kh\xf4ng?"}),(0,w.jsx)(c.Z,{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2,children:(0,w.jsx)(se.Z,{value:Z.rate,onChange:function(e,t){var n=(0,r.Z)((0,r.Z)({},Z),{},{rate:t});j(n)}})}),(0,w.jsx)(ae.Z,{autoFocus:!0,margin:"dense",id:"name",label:"C\u1ea3m ngh\u0129 c\u1ee7a b\u1ea1n",fullWidth:!0,multiline:!0,rows:3,variant:"standard",value:Z.feedbackDescription,onChange:function(e){var t=(0,r.Z)((0,r.Z)({},Z),{},{feedbackDescription:e.target.value});j(t)}})]}),(0,w.jsxs)(oe.Z,{children:[(0,w.jsx)(l.Z,{onClick:b,children:"H\u1ee7y"}),(0,w.jsx)(l.Z,{onClick:v,children:"X\xe1c nh\u1eadn"})]})]})]})},je=function(){var e=(0,y.useState)([[{estimateStartDate:"",estimateEndDate:"",estimateStartDateStr:"May 1",estimateEndDateStr:"May 5",tripId:"0",tripName:"",endLocationName:"",tripStatus:"",feedbackId:0,feedbackDescription:"",rate:5}]]),t=(0,a.Z)(e,2),n=t[0],r=t[1];return console.log(n),(0,y.useEffect)((function(){(0,s.Z)((0,i.Z)().mark((function e(){var t,n,s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.YO.tripHistory();case 3:if(""!==(t=e.sent)&&null!==t){for(n=[],s=0;s<t.length;s+=3)a=t.slice(s,s+3),n.push(a);r(n)}e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Failed to fetch feedback",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[]),(0,w.jsxs)(H.Z,{children:[(0,w.jsx)(c.Z,{display:"flex",justifyContent:"center",marginBottom:2,children:(0,w.jsxs)(c.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,w.jsx)(o.Z,{variant:"h2",children:"Chuy\u1ebfn \u0111i c\u1ee7a b\u1ea1n"}),(0,w.jsx)(c.Z,{width:"60%",border:"1px solid black",mt:1})]})}),(0,w.jsx)(pe(),{sx:{height:"450px"},children:n.map((function(e,t){return console.log(e),(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(c.Z,{display:"flex",justifyContent:"space-between",children:e.map((function(e,t){return console.log(e),(0,w.jsx)(Ze,{item:e},t)}))},t)})}))})]})},ge=function(){return(0,w.jsxs)(c.Z,{children:[(0,w.jsx)(ee,{}),(0,w.jsxs)(H.Z,{children:[(0,w.jsx)(c.Z,{mt:10,children:(0,w.jsx)(ne,{})}),(0,w.jsx)(c.Z,{mt:10,children:(0,w.jsx)(je,{})}),(0,w.jsx)(c.Z,{mt:10,children:(0,w.jsx)(D,{})})]}),(0,w.jsx)(c.Z,{mt:10,children:(0,w.jsx)(C,{})})]})}}}]);
//# sourceMappingURL=723.bc259d11.chunk.js.map