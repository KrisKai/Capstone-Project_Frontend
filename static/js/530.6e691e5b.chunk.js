"use strict";(self.webpackChunkjourney_sick=self.webpackChunkjourney_sick||[]).push([[530],{46530:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(74165),i=n(15861),a=n(29439),c=n(5849),o=n(71285),s=n(72791),l=n(57689),u=n(81153),d=n(1413),m=n(64554),f=n(4841),p=n(15416),x=n(62155),h=n(68745),g=n(55261),Z=n(22041),j=n(5446),v=n(9195),I=n(75985),y=n(80184),k=[{id:"itemName",label:"Item Name",minWidth:100,format:function(e){return e.toLocaleString("en-US")},onclick:!0},{id:"itemDescription",label:"Item Description",minWidth:100,align:"center",format:function(e){return e.toLocaleString("en-US")}},{id:"quantity",label:"Quantity",minWidth:100,align:"center",format:function(e){return e.toLocaleString("en-US")}}];function b(e){var t=(0,l.s0)(),n=(0,s.useState)({listOfItem:[],numOfItem:0}),b=(0,a.Z)(n,2),w=b[0],S=b[1],P=(0,l.UO)().tripId,C=(0,s.useState)({pageIndex:0,pageSize:10,itemName:"",categoryId:e.category.categoryId,tripId:P}),O=(0,a.Z)(C,2),D=O[0],U=O[1],A=w.listOfItem,W=w.numOfItem,_=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.e_.delete(n||"");case 3:I.Am.success("Remove trip item successfully!"),i=(0,d.Z)({},D),U(i),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Failed to fetch trip",e.t0),401==e.t0.response.status&&(localStorage.removeItem("access_token"),t("/auth/login"));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){function e(){return(e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.e_.getAll(D);case 2:t=e.sent,S(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[D]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(f.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,y.jsx)(u.ZP,{container:!0,sx:{mt:1,mb:1},children:(0,y.jsx)(u.ZP,{xs:6,sx:{pl:1},children:(0,y.jsx)("h2",{children:e.category.categoryName})})}),(0,y.jsx)(m.Z,{sx:{mt:1,mb:1},textAlign:"right"}),(0,y.jsx)(g.Z,{children:(0,y.jsxs)(p.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,y.jsx)(Z.Z,{children:(0,y.jsxs)(v.Z,{children:[k.map((function(e){return(0,y.jsx)(h.Z,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)})),(0,y.jsx)(h.Z,{align:"center",children:"Edit || Delete"},"edit")]})}),(0,y.jsx)(x.Z,{children:A.map((function(e){return(0,y.jsxs)(v.Z,{hover:!0,role:"checkbox",tabIndex:e.itemId,children:[k.map((function(n){var r=e[n.id];return(0,y.jsx)(y.Fragment,{children:n.onclick?(0,y.jsx)(h.Z,{align:n.align,onClick:function(){return n=e.itemId,void t("/admin/tripItemView/".concat(n));var n},children:n.format&&"number"===typeof r?n.format(r):r},n.id):(0,y.jsx)(h.Z,{align:n.align,children:n.format&&"number"===typeof r?n.format(r):r},n.id)})})),(0,y.jsxs)(h.Z,{align:"center",children:[(0,y.jsx)(c.Z,{variant:"outlined",value:e.itemId,onClick:function(e){return n=e.target.value,void t("/admin/tripItemUpdate/".concat(P,"/").concat(n));var n},color:"primary",children:"Edit"}),(0,y.jsx)(c.Z,{variant:"outlined",value:e.itemId,onClick:function(e){return _(e.target.value)},color:"error",children:"Delete"})]},"edit")]},e.itemId)}))})]})}),(0,y.jsx)(j.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:W,rowsPerPage:D.pageSize,page:D.pageIndex,onPageChange:function(e,t){U((0,d.Z)((0,d.Z)({},D),{},{pageIndex:t}))},onRowsPerPageChange:function(e){U((0,d.Z)((0,d.Z)({},D),{},{pageIndex:0,pageSize:+e.target.value}))}})]}),(0,y.jsx)(u.ZP,{container:!0,sx:{mt:2}})]})}function w(){var e=(0,l.s0)(),t=(0,s.useState)([]),n=(0,a.Z)(t,2),d=n[0],m=n[1],f=(0,l.UO)().tripId;return(0,s.useEffect)((function(){function e(){return(e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.OY.getAll({pageIndex:0,pageSize:10});case 2:t=e.sent,m(t.listOfCategory);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,y.jsxs)(y.Fragment,{children:[d.map((function(e){return(0,y.jsx)(b,{category:e})})),(0,y.jsxs)(u.ZP,{container:!0,sx:{mt:2},children:[(0,y.jsx)(u.ZP,{xs:6,children:(0,y.jsx)(c.Z,{variant:"outlined",onClick:function(){e("/admin/tripDetail/".concat(f))},children:"Return to Detail"})}),(0,y.jsx)(u.ZP,{xs:6,textAlign:"right",children:(0,y.jsx)(c.Z,{variant:"contained",onClick:function(){e("/admin/tripItemCreate/".concat(f))},children:"Create"})})]})]})}}}]);
//# sourceMappingURL=530.6e691e5b.chunk.js.map