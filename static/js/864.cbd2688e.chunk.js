"use strict";(self.webpackChunkjourney_sick=self.webpackChunkjourney_sick||[]).push([[864],{72864:function(e,a,r){r.r(a),r.d(a,{default:function(){return E}});var t=r(74165),n=r(15861),s=r(29439),i=r(89164),d=r(88588),o=r(30035),l=r(5849),c=r(45363),u=r(81153),m=r(62861),p=r(82626),h=r(84701),v=r(93006),Z=r(4567),x=r(7792),b=r(60222),g=r(71652),f=r(71285),y=r(97892),j=r.n(y),w=r(83027),C=r.n(w),P=r(22339),k=r(72791),q=r(57689),I=r(75985),F=r(48347),S=r(29452),B=r(8007),O=r(80184);function E(){var e=(0,q.s0)(),a=(0,q.UO)().userId,r=Boolean(a),y=(0,k.useState)({username:"",password:null,retypePassword:null,role:"",birthday:"",email:"",fullname:"",phone:"",address:"",activeStatus:"ACTIVE"}),w=(0,s.Z)(y,2),C=w[0],E=w[1],M=(0,F.C)(S.HF);(0,k.useEffect)((function(){a&&(0,n.Z)((0,t.Z)().mark((function r(){var n;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,f.BG.getById(a);case 3:null!=(n=r.sent)&&""!=n?(n.birthday=j().utc(n.birthday),E(n)):e("/admin/userList"),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),console.log("Failed to fetch user details",r.t0),401==r.t0.response.status&&(localStorage.removeItem("access_token"),e("/auth/login"));case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()}),[a]);var U=B.Ry().shape({username:B.Z_("Enter User Name").matches(/\S/,"User Name is invalid").required("User Name is required"),fullname:B.Z_("Enter Full Name").required("Full Name is required"),email:B.Z_().email("Enter Valid Email").required("Email is required"),phone:B.Z_().matches("^[0-9]{10,11}","Invalid number phone").required("Phone is required"),address:B.Z_("Enter Address").required("Address is required"),birthday:B.Z_("Enter Birthday").required("Birthday is required"),role:B.Z_("Enter Role").required("Role is required")});function N(){e("/admin/userList")}return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Z.Z,{variant:"h4",gutterBottom:!0,color:"primary",children:r?"Update User":"Create User"}),(0,O.jsx)(i.Z,{children:(0,O.jsx)(P.J9,{initialValues:C,validationSchema:U,enableReinitialize:!0,onSubmit:function(){var a=(0,n.Z)((0,t.Z)().mark((function a(n,s){var i,d,o;return(0,t.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=s.setErrors,d=s.setStatus,a.prev=1,d({success:!1}),!r){a.next=9;break}return a.next=6,f.BG.update(n);case 6:o=a.sent,a.next=12;break;case 9:return a.next=11,f.BG.create(n);case 11:o=a.sent;case 12:a.t0=o.Code,a.next="G001"===a.t0?15:"U001"===a.t0?16:"I001"===a.t0?17:"V001"===a.t0?18:19;break;case 15:case 16:case 17:case 18:return a.abrupt("return",I.Am.error(o.Message));case 19:e("/admin/userList"),r?I.Am.success("Update User Successed!"):I.Am.success("Create User Successed!");case 21:a.next=27;break;case 23:a.prev=23,a.t1=a.catch(1),d({success:!1}),i({submit:a.t1.message});case 27:case"end":return a.stop()}}),a,null,[[1,23]])})));return function(e,r){return a.apply(this,arguments)}}(),children:function(e){var a=e.errors,t=e.touched,n=e.handleChange,s=e.handleSubmit,i=e.values,Z=e.setFieldValue;return(0,O.jsx)("form",{onSubmit:s,children:(0,O.jsx)(d.Z,{sx:{padding:8,gap:2},children:(0,O.jsxs)(u.ZP,{container:!0,spacing:3,children:[(0,O.jsxs)(u.ZP,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(v.Z,{id:"username",name:"username",label:"Username",fullWidth:!0,value:i.username,variant:"outlined",onChange:n,InputProps:{readOnly:r}}),t.username&&a.username&&(0,O.jsx)(o.Z,{error:!0,id:"standard-weight-helper-nickName",children:a.username})]}),(0,O.jsxs)(u.ZP,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(v.Z,{id:"fullname",name:"fullname",label:"Full name",fullWidth:!0,value:i.Fullname,variant:"outlined",onChange:n}),t.fullname&&a.fullname&&(0,O.jsx)(o.Z,{error:!0,id:"standard-weight-helper-name",children:a.fullname})]}),!r&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(u.ZP,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(v.Z,{id:"password",name:"password",label:"Password",fullWidth:!0,type:"password",value:i.password,variant:"outlined",onChange:n}),t.password&&a.password&&(0,O.jsx)(o.Z,{error:!0,id:"standard-weight-helper-password",children:a.password})]}),(0,O.jsxs)(u.ZP,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(v.Z,{id:"retypePassword",name:"retypePassword",label:"Retype Password",fullWidth:!0,type:"password",value:i.retypePassword,variant:"outlined",onChange:n}),t.retypePassword&&a.retypePassword&&(0,O.jsx)(o.Z,{error:!0,id:"standard-weight-helper-repass",children:a.retypePassword})]})]}),(0,O.jsxs)(u.ZP,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(v.Z,{id:"address",name:"address",label:"Address",fullWidth:!0,variant:"outlined",value:i.address,onChange:n}),t.address&&a.address&&(0,O.jsx)(o.Z,{error:!0,id:"standard-weight-helper-address",children:a.address})]}),(0,O.jsxs)(u.ZP,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(v.Z,{id:"phone",name:"phone",label:"Phone Number",fullWidth:!0,variant:"outlined",value:i.phone,onChange:n}),t.phone&&a.phone&&(0,O.jsx)(o.Z,{error:!0,id:"standard-weight-helper-phone",children:a.phone})]}),(0,O.jsx)(u.ZP,{item:!0,xs:12,sm:3,children:(0,O.jsxs)(c.Z,{sx:{mt:1,minWidth:200},children:[(0,O.jsx)(m.Z,{id:"role",children:"Role"}),(0,O.jsxs)(h.Z,{labelId:"role",id:"role",value:i.role,label:"Role",onChange:n,name:"role",children:[(0,O.jsx)(p.Z,{value:"USER",children:"User"}),"Admin"===M.role&&(0,O.jsx)(p.Z,{value:"ADMIN",children:"Admin"}),(0,O.jsx)(p.Z,{value:"EMPL",children:"Employee"})]}),t.role&&a.role&&(0,O.jsx)(o.Z,{error:!0,id:"standard-weight-helper-role",children:a.role})]})}),(0,O.jsxs)(u.ZP,{item:!0,xs:12,sm:3,children:[(0,O.jsx)(g._,{dateAdapter:x.y,dateLibInstance:j().utc,children:(0,O.jsx)(b.M,{required:!0,sx:{"& .MuiInputBase-root":{paddingY:1,paddingX:3},"& .MuiFormLabel-root":{paddingY:1}},label:"Birthday",id:"birthday",name:"birthday",fullWidth:!0,value:i.birthday,onChange:function(e){Z("birthday",e)},error:Boolean(t.birthday&&a.birthday)})}),t.birthday&&a.birthday&&(0,O.jsx)(o.Z,{error:!0,id:"standard-weight-helper-Birthday",children:a.birthday})]}),(0,O.jsxs)(u.ZP,{item:!0,xs:12,sm:6,children:[(0,O.jsx)(v.Z,{id:"email",name:"email",label:"Email",fullWidth:!0,variant:"outlined",value:i.email,onChange:n}),t.email&&a.email&&(0,O.jsx)(o.Z,{error:!0,id:"standard-weight-helper-email",children:a.email})]}),(0,O.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(l.Z,{variant:"outlined",onClick:N,children:"Return to List"})}),(0,O.jsx)(u.ZP,{item:!0,xs:12,sm:6,textAlign:"right",children:(0,O.jsx)(l.Z,{type:"submit",variant:"contained",children:r?"Update ":"Create "})})]})})})}})})]})}j().extend(C())},82626:function(e,a,r){var t=r(4942),n=r(63366),s=r(87462),i=r(72791),d=r(28182),o=r(94419),l=r(12065),c=r(66934),u=r(31402),m=r(66199),p=r(53915),h=r(40162),v=r(42071),Z=r(90133),x=r(96014),b=r(29849),g=r(71498),f=r(80184),y=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],j=(0,c.ZP)(p.Z,{shouldForwardProp:function(e){return(0,c.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,a){var r=e.ownerState;return[a.root,r.dense&&a.dense,r.divider&&a.divider,!r.disableGutters&&a.gutters]}})((function(e){var a,r=e.theme,n=e.ownerState;return(0,s.Z)({},r.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((r.vars||r).palette.divider),backgroundClip:"padding-box"},(a={"&:hover":{textDecoration:"none",backgroundColor:(r.vars||r).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,t.Z)(a,"&.".concat(g.Z.selected),(0,t.Z)({backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,l.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)},"&.".concat(g.Z.focusVisible),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.focusOpacity,"))"):(0,l.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.focusOpacity)})),(0,t.Z)(a,"&.".concat(g.Z.selected,":hover"),{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.hoverOpacity,"))"):(0,l.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,l.Fq)(r.palette.primary.main,r.palette.action.selectedOpacity)}}),(0,t.Z)(a,"&.".concat(g.Z.focusVisible),{backgroundColor:(r.vars||r).palette.action.focus}),(0,t.Z)(a,"&.".concat(g.Z.disabled),{opacity:(r.vars||r).palette.action.disabledOpacity}),(0,t.Z)(a,"& + .".concat(Z.Z.root),{marginTop:r.spacing(1),marginBottom:r.spacing(1)}),(0,t.Z)(a,"& + .".concat(Z.Z.inset),{marginLeft:52}),(0,t.Z)(a,"& .".concat(b.Z.root),{marginTop:0,marginBottom:0}),(0,t.Z)(a,"& .".concat(b.Z.inset),{paddingLeft:36}),(0,t.Z)(a,"& .".concat(x.Z.root),{minWidth:36}),a),!n.dense&&(0,t.Z)({},r.breakpoints.up("sm"),{minHeight:"auto"}),n.dense&&(0,s.Z)({minHeight:32,paddingTop:4,paddingBottom:4},r.typography.body2,(0,t.Z)({},"& .".concat(x.Z.root," svg"),{fontSize:"1.25rem"})))})),w=i.forwardRef((function(e,a){var r=(0,u.Z)({props:e,name:"MuiMenuItem"}),t=r.autoFocus,l=void 0!==t&&t,c=r.component,p=void 0===c?"li":c,Z=r.dense,x=void 0!==Z&&Z,b=r.divider,w=void 0!==b&&b,C=r.disableGutters,P=void 0!==C&&C,k=r.focusVisibleClassName,q=r.role,I=void 0===q?"menuitem":q,F=r.tabIndex,S=r.className,B=(0,n.Z)(r,y),O=i.useContext(m.Z),E=i.useMemo((function(){return{dense:x||O.dense||!1,disableGutters:P}}),[O.dense,x,P]),M=i.useRef(null);(0,h.Z)((function(){l&&M.current&&M.current.focus()}),[l]);var U,N=(0,s.Z)({},r,{dense:E.dense,divider:w,disableGutters:P}),R=function(e){var a=e.disabled,r=e.dense,t=e.divider,n=e.disableGutters,i=e.selected,d=e.classes,l={root:["root",r&&"dense",a&&"disabled",!n&&"gutters",t&&"divider",i&&"selected"]},c=(0,o.Z)(l,g.K,d);return(0,s.Z)({},d,c)}(r),A=(0,v.Z)(M,a);return r.disabled||(U=void 0!==F?F:-1),(0,f.jsx)(m.Z.Provider,{value:E,children:(0,f.jsx)(j,(0,s.Z)({ref:A,role:I,tabIndex:U,component:p,focusVisibleClassName:(0,d.Z)(R.focusVisible,k),className:(0,d.Z)(R.root,S)},B,{ownerState:N,classes:R}))})}));a.Z=w},71498:function(e,a,r){r.d(a,{K:function(){return s}});var t=r(75878),n=r(21217);function s(e){return(0,n.Z)("MuiMenuItem",e)}var i=(0,t.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);a.Z=i}}]);
//# sourceMappingURL=864.cbd2688e.chunk.js.map