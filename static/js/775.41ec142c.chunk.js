"use strict";(self.webpackChunkjourney_sick=self.webpackChunkjourney_sick||[]).push([[775],{27775:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var r=a(74165),n=a(15861),i=a(29439),s=a(89164),c=a(88588),o=a(30035),l=a(5849),d=a(45363),u=a(81153),m=a(62861),p=a(82626),v=a(84701),h=a(93006),Z=a(4567),b=a(71285),x=a(97892),f=a.n(x),g=a(83027),j=a.n(g),k=a(22339),I=a(72791),y=a(57689),C=a(75985),N=a(8007),S=a(80184);function M(){var e=(0,y.s0)(),t=(0,y.UO)(),a=t.tripId,x=t.memberId,f=Boolean(x),g=(0,I.useState)({userId:"",tripId:a,memberRole:"",nickName:"",status:"Active"}),j=(0,i.Z)(g,2),M=j[0],R=j[1],O=(0,I.useState)(""),P=(0,i.Z)(O,2),w=P[0],T=P[1],B=(0,I.useState)(""),E=(0,i.Z)(B,2),F=E[0],V=E[1],q=(0,I.useState)([{userId:"",email:"",fullname:""}]),A=(0,i.Z)(q,2),G=A[0],U=A[1],L=(0,I.useRef)(null);function W(){e("/admin/tripMemberList/".concat(a))}(0,I.useEffect)((function(){(0,n.Z)((0,r.Z)().mark((function t(){var n,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.BG.getAll({pageIndex:0,pageSize:99999999,userName:""});case 2:if(n=t.sent,U(n.listOfUser),a&&x){t.next=6;break}return t.abrupt("return");case 6:return t.prev=6,t.next=9,b.k9.getById(x);case 9:null!=(i=t.sent)&&""!=i?(R(i),T(i.fullname),V(i.email)):e("/admin/tripMemberList/".concat(a)),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),console.log("Failed to fetch trip member",t.t0),401==t.t0.response.status&&(localStorage.removeItem("access_token"),e("/auth/login"));case 17:case"end":return t.stop()}}),t,null,[[6,13]])})))()}),[a]);var _=N.Ry().shape({userId:N.Z_("Enter User").required("User is required"),memberRole:N.Z_("Enter Member Role").required("Member Role is required"),nickName:N.Z_("Enter Nick Name").required("Nick Name is required")});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(Z.Z,{variant:"h4",gutterBottom:!0,color:"primary",children:f?"Update Trip Member":"Create Trip Member"}),(0,S.jsx)(s.Z,{children:(0,S.jsx)(k.J9,{innerRef:L,initialValues:M,enableReinitialize:!0,validationSchema:_,onSubmit:function(){var t=(0,n.Z)((0,r.Z)().mark((function t(n,i){var s,c,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=i.setErrors,c=i.setStatus,t.prev=1,c({success:!1}),!f){t.next=9;break}return t.next=6,b.k9.update(n);case 6:o=t.sent,t.next=12;break;case 9:return t.next=11,b.k9.create(n);case 11:o=t.sent;case 12:t.t0=o.Code,t.next="G001"===t.t0?15:"U001"===t.t0?16:"I001"===t.t0?17:18;break;case 15:case 16:case 17:return t.abrupt("return",C.Am.error(o.Message));case 18:o>0&&(e("/admin/tripMemberList/".concat(a)),f?C.Am.success("Update Trip Member Successed!"):C.Am.success("Create Trip Member Successed!"));case 19:t.next=25;break;case 21:t.prev=21,t.t1=t.catch(1),c({success:!1}),s({submit:t.t1.message});case 25:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e,a){return t.apply(this,arguments)}}(),children:function(e){var t=e.errors,a=e.touched,r=e.handleChange,n=e.handleSubmit,i=e.values,s=e.setFieldValue;return(0,S.jsx)("form",{onSubmit:n,children:(0,S.jsx)(c.Z,{sx:{padding:8,gap:2},children:(0,S.jsxs)(u.ZP,{container:!0,spacing:3,children:[(0,S.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsxs)(d.Z,{sx:{minWidth:530},children:[(0,S.jsx)(m.Z,{id:"userId",children:"Trip Member Id"}),(0,S.jsx)(v.Z,{labelId:"userId",id:"userId",value:i.userId,label:"Role",onChange:function(e){var t;s("userId",e.target.value),t=e.target.value,G.forEach((function(e){e.userId===t&&(T(e.fullname),V(e.email))}))},name:"userId",children:G.map((function(e){return(0,S.jsxs)(p.Z,{value:e.userId,children:[e.fullname," (",e.email,")"]})}))}),a.TripPresenter&&t.TripPresenter&&(0,S.jsx)(o.Z,{error:!0,id:"standard-weight-helper-role",children:t.TripPresenter})]})}),(0,S.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(h.Z,{id:"name",name:"name",label:"Member Name",fullWidth:!0,variant:"outlined",value:w,InputProps:{readOnly:!0}})}),(0,S.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(h.Z,{id:"email",name:"UserName",label:"Email",fullWidth:!0,variant:"outlined",value:F,InputProps:{readOnly:!0}})}),(0,S.jsxs)(u.ZP,{item:!0,xs:12,sm:6,children:[(0,S.jsx)(h.Z,{id:"nickName",name:"nickName",label:"Nickname",fullWidth:!0,autoComplete:"",variant:"outlined",value:i.nickName,onChange:r,error:Boolean(a.nickName&&t.nickName)}),a.nickName&&t.nickName&&(0,S.jsx)(o.Z,{error:!0,id:"standard-weight-helper-NickName",children:t.nickName})]}),(0,S.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsxs)(d.Z,{sx:{minWidth:530},children:[(0,S.jsx)(m.Z,{id:"memberRole",children:"Trip Role"}),(0,S.jsxs)(v.Z,{labelId:"memberRole",id:"memberRole",value:i.memberRole,label:"memberRole",onChange:r,name:"memberRole",children:[(0,S.jsx)(p.Z,{value:"HOST",children:"Host"}),(0,S.jsx)(p.Z,{value:"MEMBER",children:"Member"})]}),a.userId&&t.userId&&(0,S.jsx)(o.Z,{error:!0,id:"standard-weight-helper-userId",children:t.userId})]})}),f?(0,S.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsxs)(d.Z,{sx:{minWidth:530},children:[(0,S.jsx)(m.Z,{id:"Status",children:"Status"}),(0,S.jsxs)(v.Z,{labelId:"Status",id:"status",value:i.status,label:"Status",onChange:r,name:"status",children:[(0,S.jsx)(p.Z,{value:"ACTIVE",children:"Active"}),(0,S.jsx)(p.Z,{value:"INACTIVE",children:"Inactive"}),(0,S.jsx)(p.Z,{value:"BANNED",children:"Banned"})]}),a.status&&t.status&&(0,S.jsx)(o.Z,{error:!0,id:"standard-weight-helper-Status",children:t.status})]})}):(0,S.jsx)(u.ZP,{item:!0,xs:12,sm:6}),(0,S.jsx)(u.ZP,{item:!0,xs:12,sm:6,children:(0,S.jsx)(l.Z,{variant:"outlined",onClick:W,children:"Return to List"})}),(0,S.jsx)(u.ZP,{item:!0,xs:12,sm:6,textAlign:"right",children:(0,S.jsx)(l.Z,{type:"submit",variant:"contained",children:f?"Update":"Create"})})]})})})}})})]})}f().extend(j())},82626:function(e,t,a){var r=a(4942),n=a(63366),i=a(87462),s=a(72791),c=a(28182),o=a(94419),l=a(12065),d=a(66934),u=a(31402),m=a(66199),p=a(53915),v=a(40162),h=a(42071),Z=a(90133),b=a(96014),x=a(29849),f=a(71498),g=a(80184),j=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],k=(0,d.ZP)(p.Z,{shouldForwardProp:function(e){return(0,d.FO)(e)||"classes"===e},name:"MuiMenuItem",slot:"Root",overridesResolver:function(e,t){var a=e.ownerState;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((function(e){var t,a=e.theme,n=e.ownerState;return(0,i.Z)({},a.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((a.vars||a).palette.divider),backgroundClip:"padding-box"},(t={"&:hover":{textDecoration:"none",backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,r.Z)(t,"&.".concat(f.Z.selected),(0,r.Z)({backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):(0,l.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity)},"&.".concat(f.Z.focusVisible),{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.focusOpacity,"))"):(0,l.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)})),(0,r.Z)(t,"&.".concat(f.Z.selected,":hover"),{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / calc(").concat(a.vars.palette.action.selectedOpacity," + ").concat(a.vars.palette.action.hoverOpacity,"))"):(0,l.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:a.vars?"rgba(".concat(a.vars.palette.primary.mainChannel," / ").concat(a.vars.palette.action.selectedOpacity,")"):(0,l.Fq)(a.palette.primary.main,a.palette.action.selectedOpacity)}}),(0,r.Z)(t,"&.".concat(f.Z.focusVisible),{backgroundColor:(a.vars||a).palette.action.focus}),(0,r.Z)(t,"&.".concat(f.Z.disabled),{opacity:(a.vars||a).palette.action.disabledOpacity}),(0,r.Z)(t,"& + .".concat(Z.Z.root),{marginTop:a.spacing(1),marginBottom:a.spacing(1)}),(0,r.Z)(t,"& + .".concat(Z.Z.inset),{marginLeft:52}),(0,r.Z)(t,"& .".concat(x.Z.root),{marginTop:0,marginBottom:0}),(0,r.Z)(t,"& .".concat(x.Z.inset),{paddingLeft:36}),(0,r.Z)(t,"& .".concat(b.Z.root),{minWidth:36}),t),!n.dense&&(0,r.Z)({},a.breakpoints.up("sm"),{minHeight:"auto"}),n.dense&&(0,i.Z)({minHeight:32,paddingTop:4,paddingBottom:4},a.typography.body2,(0,r.Z)({},"& .".concat(b.Z.root," svg"),{fontSize:"1.25rem"})))})),I=s.forwardRef((function(e,t){var a=(0,u.Z)({props:e,name:"MuiMenuItem"}),r=a.autoFocus,l=void 0!==r&&r,d=a.component,p=void 0===d?"li":d,Z=a.dense,b=void 0!==Z&&Z,x=a.divider,I=void 0!==x&&x,y=a.disableGutters,C=void 0!==y&&y,N=a.focusVisibleClassName,S=a.role,M=void 0===S?"menuitem":S,R=a.tabIndex,O=a.className,P=(0,n.Z)(a,j),w=s.useContext(m.Z),T=s.useMemo((function(){return{dense:b||w.dense||!1,disableGutters:C}}),[w.dense,b,C]),B=s.useRef(null);(0,v.Z)((function(){l&&B.current&&B.current.focus()}),[l]);var E,F=(0,i.Z)({},a,{dense:T.dense,divider:I,disableGutters:C}),V=function(e){var t=e.disabled,a=e.dense,r=e.divider,n=e.disableGutters,s=e.selected,c=e.classes,l={root:["root",a&&"dense",t&&"disabled",!n&&"gutters",r&&"divider",s&&"selected"]},d=(0,o.Z)(l,f.K,c);return(0,i.Z)({},c,d)}(a),q=(0,h.Z)(B,t);return a.disabled||(E=void 0!==R?R:-1),(0,g.jsx)(m.Z.Provider,{value:T,children:(0,g.jsx)(k,(0,i.Z)({ref:q,role:M,tabIndex:E,component:p,focusVisibleClassName:(0,c.Z)(V.focusVisible,N),className:(0,c.Z)(V.root,O)},P,{ownerState:F,classes:V}))})}));t.Z=I},71498:function(e,t,a){a.d(t,{K:function(){return i}});var r=a(75878),n=a(21217);function i(e){return(0,n.Z)("MuiMenuItem",e)}var s=(0,r.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);t.Z=s}}]);
//# sourceMappingURL=775.41ec142c.chunk.js.map