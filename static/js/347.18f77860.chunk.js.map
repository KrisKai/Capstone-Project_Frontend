{"version":3,"file":"static/js/347.18f77860.chunk.js","mappings":"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","sources":["pages/admin/tripManagement/route/tripRouteList.jsx"],"sourcesContent":["import { Box, Button, TextField } from \"@mui/material\";\r\nimport Paper from \"@mui/material/Paper\";\r\nimport Table from \"@mui/material/Table\";\r\nimport TableBody from \"@mui/material/TableBody\";\r\nimport TableCell from \"@mui/material/TableCell\";\r\nimport TableContainer from \"@mui/material/TableContainer\";\r\nimport TableHead from \"@mui/material/TableHead\";\r\nimport TablePagination from \"@mui/material/TablePagination\";\r\nimport TableRow from \"@mui/material/TableRow\";\r\nimport { tripRouteApi } from \"api\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport Grid from \"@mui/material/Grid\";\r\n\r\n// assets\r\n\r\nconst columns = [\r\n  { id: \"routeId\", label: \"Route Id\", minWidth: 100, onclick: true },\r\n  {\r\n    id: \"routeDescription\",\r\n    label: \"Route Description\",\r\n    minWidth: 100,\r\n    align: \"center\",\r\n    format: (value) => value.toLocaleString(\"en-US\"),\r\n  },\r\n];\r\n\r\nexport default function StickyHeadTableTripRoute() {\r\n  let navigate = useNavigate();\r\n  const { tripId } = useParams();\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [allTripRoutes, setAllTripRoutes] = useState({\r\n    listOfRoute: [],\r\n    numOfRoute: 0,\r\n  });\r\n  const [filter, setFilter] = useState({\r\n    pageIndex: 0,\r\n    pageSize: 10,\r\n    planName: \"\",\r\n    tripId: tripId,\r\n  });\r\n  const planList = allTripRoutes.listOfRoute;\r\n  const numberOfRoute = allTripRoutes.numOfRoute;\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchTerm(event.target.value);\r\n    // call api\r\n    setFilter({\r\n      ...filter,\r\n      planName: event.target.value,\r\n    });\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    setSearchTerm(event.target.value);\r\n    setFilter({\r\n      ...filter,\r\n      planName: event.target.value,\r\n    });\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setFilter({\r\n      ...filter,\r\n      pageIndex: newPage,\r\n    });\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setFilter({\r\n      ...filter,\r\n      pageIndex: 0,\r\n      pageSize: +event.target.value,\r\n    });\r\n  };\r\n\r\n  const handleUpdate = (id) => {\r\n    // update\r\n    navigate(`/admin/tripRouteUpdate/${tripId}/${id}`);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      // Remove trip API\r\n      await tripRouteApi.delete(id || \"\");\r\n\r\n      toast.success(\"Remove trip plan successfully!\");\r\n\r\n      // Trigger to re-fetch student list with current filter\r\n      const newFilter = { ...filter };\r\n      setFilter(newFilter);\r\n    } catch (error) {\r\n      // Toast error\r\n      console.log(\"Failed to fetch trip\", error);\r\n      if (error.response.status == 401) {\r\n        localStorage.removeItem(\"access_token\");\r\n        navigate(\"/auth/login\");\r\n      }\r\n    }\r\n  };\r\n\r\n  function gotoCreate() {\r\n    navigate(`/admin/tripRouteCreate/${tripId}`);\r\n  }\r\n\r\n  function gotoList() {\r\n    navigate(`/admin/tripDetail/${tripId}`);\r\n  }\r\n\r\n  function gotoView(id) {\r\n    navigate(`/admin/tripRouteView/${id}`);\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function getAllRoutes() {\r\n      const response = await tripRouteApi.getAll(filter);\r\n      setAllTripRoutes(response);\r\n    }\r\n    getAllRoutes();\r\n  }, [filter]);\r\n\r\n  return (\r\n    <>\r\n      <Paper sx={{ width: \"100%\", overflow: \"hidden\" }}>\r\n        <Box sx={{ mt: 1, mb: 1 }} textAlign=\"right\">\r\n          <TextField\r\n            id=\"search\"\r\n            type=\"search\"\r\n            label=\"Search\"\r\n            value={searchTerm}\r\n            onChange={handleChange}\r\n            sx={{ width: 400 }}\r\n          />\r\n          <Button variant=\"outlined\" onClick={handleSearch} sx={{ height: 42 }}>\r\n            Search\r\n          </Button>\r\n        </Box>\r\n\r\n        <TableContainer>\r\n          <Table stickyHeader aria-label=\"sticky table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                {columns.map((column) => (\r\n                  <TableCell\r\n                    key={column.id}\r\n                    align={column.align}\r\n                    style={{ minWidth: column.minWidth }}\r\n                  >\r\n                    {column.label}\r\n                  </TableCell>\r\n                ))}\r\n                <TableCell key=\"edit\" align=\"center\">\r\n                  Edit || Delete\r\n                </TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {planList.map((row) => {\r\n                return (\r\n                  <TableRow\r\n                    hover\r\n                    role=\"checkbox\"\r\n                    tabIndex={row.routeId}\r\n                    key={row.routeId}\r\n                  >\r\n                    {columns.map((column) => {\r\n                      const value = row[column.id];\r\n                      return (\r\n                        <>\r\n                          {column.onclick ? (\r\n                            <TableCell\r\n                              key={column.id}\r\n                              align={column.align}\r\n                              onClick={() => gotoView(row.routeId)}\r\n                            >\r\n                              {column.format && typeof value === \"number\"\r\n                                ? column.format(value)\r\n                                : value}\r\n                            </TableCell>\r\n                          ) : (\r\n                            <TableCell key={column.id} align={column.align}>\r\n                              {column.format && typeof value === \"number\"\r\n                                ? column.format(value)\r\n                                : value}\r\n                            </TableCell>\r\n                          )}\r\n                        </>\r\n                      );\r\n                    })}\r\n                    <TableCell key=\"edit\" align=\"center\">\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        value={row.routeId}\r\n                        onClick={(e) => handleUpdate(e.target.value)}\r\n                        color=\"primary\"\r\n                      >\r\n                        Edit\r\n                      </Button>\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        value={row.routeId}\r\n                        onClick={(e) => handleDelete(e.target.value)}\r\n                        color=\"error\"\r\n                      >\r\n                        Delete\r\n                      </Button>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <TablePagination\r\n          rowsPerPageOptions={[10, 25, 100]}\r\n          component=\"div\"\r\n          count={numberOfRoute}\r\n          rowsPerPage={filter.pageSize}\r\n          page={filter.pageIndex}\r\n          onPageChange={handleChangePage}\r\n          onRowsPerPageChange={handleChangeRowsPerPage}\r\n        />\r\n      </Paper>\r\n      <Grid container sx={{ mt: 2 }}>\r\n        <Grid xs={6}>\r\n          <Button variant=\"outlined\" onClick={gotoList}>\r\n            Return to Detail\r\n          </Button>\r\n        </Grid>\r\n        <Grid xs={6} textAlign=\"right\">\r\n          <Button variant=\"contained\" onClick={gotoCreate}>\r\n            Create\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </>\r\n  );\r\n}\r\n"],"names":["columns","id","label","minWidth","onclick","align","format","value","toLocaleString","StickyHeadTableTripRoute","navigate","useNavigate","tripId","useParams","_useState","useState","_useState2","_slicedToArray","searchTerm","setSearchTerm","_useState3","listOfRoute","numOfRoute","_useState4","allTripRoutes","setAllTripRoutes","_useState5","pageIndex","pageSize","planName","_useState6","filter","setFilter","planList","numberOfRoute","handleDelete","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","newFilter","wrap","_context","prev","next","tripRouteApi","toast","_objectSpread","t0","console","log","response","status","localStorage","removeItem","stop","_x","apply","arguments","useEffect","_getAllRoutes","_callee2","_context2","sent","getAllRoutes","_jsxs","_Fragment","children","Paper","sx","width","overflow","Box","mt","mb","textAlign","_jsx","TextField","type","onChange","event","target","Button","variant","onClick","height","TableContainer","Table","stickyHeader","TableHead","TableRow","map","column","TableCell","style","TableBody","row","hover","role","tabIndex","routeId","concat","e","color","TablePagination","rowsPerPageOptions","component","count","rowsPerPage","page","onPageChange","newPage","onRowsPerPageChange","Grid","container","xs"],"sourceRoot":""}