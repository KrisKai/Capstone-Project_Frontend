"use strict";(self.webpackChunkjourney_sick=self.webpackChunkjourney_sick||[]).push([[347],{11347:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(74165),i=n(15861),a=n(1413),c=n(29439),o=n(64554),l=n(93006),u=n(5849),s=n(4841),d=n(15416),h=n(62155),p=n(68745),f=n(55261),x=n(22041),g=n(5446),Z=n(9195),m=n(71285),v=n(72791),j=n(57689),k=n(75985),I=n(81153),b=n(80184),w=[{id:"routeId",label:"Route Id",minWidth:100,onclick:!0},{id:"routeDescription",label:"Route Description",minWidth:100,align:"center",format:function(e){return e.toLocaleString("en-US")}}];function y(){var e=(0,j.s0)(),t=(0,j.UO)().tripId,n=(0,v.useState)(""),y=(0,c.Z)(n,2),C=y[0],R=y[1],S=(0,v.useState)({listOfRoute:[],numOfRoute:0}),P=(0,c.Z)(S,2),D=P[0],O=P[1],A=(0,v.useState)({pageIndex:0,pageSize:10,planName:"",tripId:t}),W=(0,c.Z)(A,2),z=W[0],E=W[1],F=D.listOfRoute,N=D.numOfRoute,U=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m.DM.delete(n||"");case 3:k.Am.success("Remove trip plan successfully!"),i=(0,a.Z)({},z),E(i),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Failed to fetch trip",t.t0),401==t.t0.response.status&&(localStorage.removeItem("access_token"),e("/auth/login"));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return(0,v.useEffect)((function(){function e(){return(e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.DM.getAll(z);case 2:t=e.sent,O(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[z]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(s.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,b.jsxs)(o.Z,{sx:{mt:1,mb:1},textAlign:"right",children:[(0,b.jsx)(l.Z,{id:"search",type:"search",label:"Search",value:C,onChange:function(e){R(e.target.value),E((0,a.Z)((0,a.Z)({},z),{},{planName:e.target.value}))},sx:{width:400}}),(0,b.jsx)(u.Z,{variant:"outlined",onClick:function(e){R(e.target.value),E((0,a.Z)((0,a.Z)({},z),{},{planName:e.target.value}))},sx:{height:42},children:"Search"})]}),(0,b.jsx)(f.Z,{children:(0,b.jsxs)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,b.jsx)(x.Z,{children:(0,b.jsxs)(Z.Z,{children:[w.map((function(e){return(0,b.jsx)(p.Z,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)})),(0,b.jsx)(p.Z,{align:"center",children:"Edit || Delete"},"edit")]})}),(0,b.jsx)(h.Z,{children:F.map((function(n){return(0,b.jsxs)(Z.Z,{hover:!0,role:"checkbox",tabIndex:n.routeId,children:[w.map((function(t){var r=n[t.id];return(0,b.jsx)(b.Fragment,{children:t.onclick?(0,b.jsx)(p.Z,{align:t.align,onClick:function(){return t=n.routeId,void e("/admin/tripRouteView/".concat(t));var t},children:t.format&&"number"===typeof r?t.format(r):r},t.id):(0,b.jsx)(p.Z,{align:t.align,children:t.format&&"number"===typeof r?t.format(r):r},t.id)})})),(0,b.jsxs)(p.Z,{align:"center",children:[(0,b.jsx)(u.Z,{variant:"outlined",value:n.routeId,onClick:function(n){return r=n.target.value,void e("/admin/tripRouteUpdate/".concat(t,"/").concat(r));var r},color:"primary",children:"Edit"}),(0,b.jsx)(u.Z,{variant:"outlined",value:n.routeId,onClick:function(e){return U(e.target.value)},color:"error",children:"Delete"})]},"edit")]},n.routeId)}))})]})}),(0,b.jsx)(g.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:N,rowsPerPage:z.pageSize,page:z.pageIndex,onPageChange:function(e,t){E((0,a.Z)((0,a.Z)({},z),{},{pageIndex:t}))},onRowsPerPageChange:function(e){E((0,a.Z)((0,a.Z)({},z),{},{pageIndex:0,pageSize:+e.target.value}))}})]}),(0,b.jsxs)(I.ZP,{container:!0,sx:{mt:2},children:[(0,b.jsx)(I.ZP,{xs:6,children:(0,b.jsx)(u.Z,{variant:"outlined",onClick:function(){e("/admin/tripDetail/".concat(t))},children:"Return to Detail"})}),(0,b.jsx)(I.ZP,{xs:6,textAlign:"right",children:(0,b.jsx)(u.Z,{variant:"contained",onClick:function(){e("/admin/tripRouteCreate/".concat(t))},children:"Create"})})]})]})}}}]);
//# sourceMappingURL=347.18f77860.chunk.js.map