"use strict";(self.webpackChunkjourney_sick=self.webpackChunkjourney_sick||[]).push([[260],{92260:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});var r=n(74165),a=n(15861),i=n(29439),s=n(88588),c=n(5849),u=n(4567),o=n(71285),l=n(97892),d=n.n(l),p=n(83027),x=n.n(p),h=n(22339),f=n(4942),Z=n(1413),v=n(93433),m=n(64554),g=n(93006),j=n(42419),k=(n(23197),n(75037),n(72791)),b=n(75985),S=n(80184);function R(e){e.getReturnData;var t=(0,k.useState)(null),n=(0,i.Z)(t,2),l=(n[0],n[1],(0,k.useState)(null)),d=(0,i.Z)(l,2),p=(d[0],d[1],(0,k.useState)("")),x=(0,i.Z)(p,2),h=(x[0],x[1],(0,k.useState)("")),R=(0,i.Z)(h,2),w=(R[0],R[1],(0,k.useState)([{tripId:0,longitude:"",latitude:"",locationName:"",priority:0}])),y=(0,i.Z)(w,2),D=y[0],I=y[1],C=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t){e.next=5;break}return e.next=3,o.DM.delete(t||"");case 3:e.sent>0&&b.Am.success("Xo\xe1 th\xe0nh c\xf4ng!");case 5:(a=(0,v.Z)(D)).length>1&&(a.splice(n,1),I(a));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();console.log(D);var A=function(e){if(console.log(1),e>0){var t=(0,v.Z)(D),n=t[e];t[e]=t[e-1],t[e-1]=n,I(t)}};return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(m.Z,{height:"100vh",width:"100%",display:"flex",children:[(0,S.jsxs)(m.Z,{width:"25%",padding:"10px 10px",children:[(0,S.jsx)(m.Z,{textAlign:"center",children:(0,S.jsx)(u.Z,{variant:"h2",children:"Setting Route"})}),(0,S.jsxs)(m.Z,{display:"flex",flexDirection:"column",gap:"10px",children:[(0,S.jsx)(m.Z,{paddingTop:"10px",display:"flex",flexDirection:"column",gap:"10px",children:D.map((function(e,t){return(0,S.jsxs)(s.Z,{sx:{padding:"15px 10px"},children:[(0,S.jsx)(m.Z,{borderRadius:"2px",children:(0,S.jsx)(g.Z,{id:"locationName",name:"locationName",value:e.locationName,onChange:function(e){return function(e,t){var n=e.target,r=n.name,a=n.value;I((function(e){var n=(0,v.Z)(e);return n[t]=(0,Z.Z)((0,Z.Z)({},n[t]),{},(0,f.Z)({},r,a)),n}))}(e,t)}})}),(0,S.jsxs)(m.Z,{display:"flex",mt:"5px",children:[(0,S.jsx)(c.Z,{sx:{width:"50%"},onClick:function(){return C(e.tripId,t)},children:"Delete"}),(0,S.jsx)(c.Z,{sx:{width:"50%"},onClick:function(){return A(t)},children:"Move up"})]})]},t)}))}),(0,S.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"column",gap:"10px","& button":{width:"100%"}},children:[(0,S.jsx)(c.Z,{variant:"contained",startIcon:(0,S.jsx)(j.Z,{}),onClick:function(){I([].concat((0,v.Z)(D),[{tripId:0,longitude:"",latitude:"",locationName:""}]))},children:"Add new place"}),(0,S.jsx)(c.Z,{variant:"contained",children:"Save"})]})]})]}),(0,S.jsx)(m.Z,{height:"100%",flex:"1 1 0"})]})})}var w=n(57689),y=n(8007);function D(){var e=(0,w.s0)(),t=(0,w.UO)(),n=t.tripId,l=t.routeId,d=Boolean(l),p=(0,k.useState)({tripId:"",routeDescription:null}),x=(0,i.Z)(p,2),f=x[0],Z=x[1],v=(0,k.useState)({tripId:"",tripName:""}),m=(0,i.Z)(v,2),g=(m[0],m[1]);function j(){e("/admin/tripRouteList/".concat(n))}(0,k.useEffect)((function(){(0,a.Z)((0,r.Z)().mark((function t(){var a,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.YO.getAll({pageIndex:0,pageSize:99999999,tripName:""});case 2:if(a=t.sent,g(a.listOfTrip),n&&l){t.next=6;break}return t.abrupt("return");case 6:return t.prev=6,t.next=9,o.DM.getById(l);case 9:null!=(i=t.sent)&&""!=i?Z(i):e("/admin/tripRouteList/".concat(n)),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),console.log("Failed to fetch trip route",t.t0),401==t.t0.response.status&&(localStorage.removeItem("access_token"),e("/auth/login"));case 17:case"end":return t.stop()}}),t,null,[[6,13]])})))()}),[n]);var D=y.Ry().shape({routeDescription:y.Z_("Enter Route Description").required("Route Description is required")});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(u.Z,{variant:"h4",gutterBottom:!0,color:"primary",children:d?"Update Trip Route":"Create Trip Route"}),(0,S.jsx)(h.J9,{initialValues:f,enableReinitialize:!0,validationSchema:D,onSubmit:function(){var t=(0,a.Z)((0,r.Z)().mark((function t(a,i){var s,c,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=i.setErrors,c=i.setStatus,t.prev=1,c({success:!1}),!d){t.next=9;break}return t.next=6,o.DM.update(a);case 6:u=t.sent,t.next=12;break;case 9:return t.next=11,o.DM.create(a);case 11:u=t.sent;case 12:t.t0=u.Code,t.next="G001"===t.t0?15:"U001"===t.t0?16:"I001"===t.t0?17:18;break;case 15:case 16:case 17:return t.abrupt("return",b.Am.error(u.Message));case 18:u>0&&(e("/admin/tripRouteList/".concat(n)),d?b.Am.success("Update Trip Route Successed!"):b.Am.success("Create Trip Route Successed!"));case 19:t.next=25;break;case 21:t.prev=21,t.t1=t.catch(1),c({success:!1}),s({submit:t.t1.message});case 25:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e,n){return t.apply(this,arguments)}}(),children:function(e){e.errors,e.touched,e.handleChange;var t=e.handleSubmit;e.values,e.setFieldValue;return(0,S.jsxs)("form",{onSubmit:t,children:[(0,S.jsx)(s.Z,{children:(0,S.jsx)(R,{})}),(0,S.jsx)(c.Z,{variant:"outlined",onClick:j,children:"Return to List"})]})}})]})}d().extend(x())},42419:function(e,t,n){var r=n(64836);t.Z=void 0;var a=r(n(45649)),i=n(80184),s=(0,a.default)((0,i.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");t.Z=s}}]);
//# sourceMappingURL=260.55076186.chunk.js.map