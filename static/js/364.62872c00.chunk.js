"use strict";(self.webpackChunkjourney_sick=self.webpackChunkjourney_sick||[]).push([[364],{14364:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var r=t(74165),a=t(15861),i=t(1413),c=t(29439),l=t(64554),o=t(93006),s=t(5849),u=t(4841),d=t(15416),m=t(62155),h=t(68745),f=t(55261),p=t(22041),g=t(5446),x=t(9195),Z=t(5574),b=t(77386),v=t(65661),j=t(71285),k=t(72791),C=t(57689),y=t(75985),I=t(81153),S=t(80184),w=[{id:"nickName",label:"Nick Name",minWidth:100,onclick:!0},{id:"fullname",label:"Fullname",minWidth:100,align:"center",format:function(e){return e.toLocaleString("en-US")}},{id:"email",label:"Email",minWidth:170,align:"center"},{id:"phone",label:"Phone",minWidth:170,align:"center"},{id:"memberRole",label:"Role",minWidth:130,align:"center"},{id:"status",label:"Status",minWidth:130,align:"center"}];function P(){var e=(0,C.s0)(),n=(0,k.useState)(""),t=(0,c.Z)(n,2),P=t[0],M=t[1],W=(0,k.useState)({listOfMember:[],numOfMember:0}),A=(0,c.Z)(W,2),D=A[0],N=A[1],O=(0,C.UO)().tripId,_=(0,k.useState)(""),F=(0,c.Z)(_,2),R=F[0],E=F[1],U=(0,k.useState)(!1),z=(0,c.Z)(U,2),G=z[0],Y=z[1],H=(0,k.useState)({pageIndex:0,pageSize:10,tripId:O,memberName:""}),L=(0,c.Z)(H,2),V=L[0],q=L[1],B=D.listOfMember,J=D.numOfMember,K=function(){Y(!1)},Q=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t){var a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.k9.sendMail(t||"");case 3:a=n.sent,n.t0=a.Code,n.next="G001"===n.t0?7:"U001"===n.t0?8:9;break;case 7:case 8:return n.abrupt("return",y.Am.error(a.Message));case 9:y.Am.success("Send mail successfully!");case 10:n.next=16;break;case 12:n.prev=12,n.t1=n.catch(0),console.log("Failed to fetch trip member",n.t1),401==n.t1.response.status&&(localStorage.removeItem("access_token"),e("/auth/login"));case 16:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}(),T=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j.k9.delete(R||"");case 3:t=n.sent,n.t0=t.Code,n.next="G001"===n.t0?7:"D001"===n.t0?8:9;break;case 7:case 8:return n.abrupt("return",y.Am.error(t.Message));case 9:y.Am.success("Remove trip member successfully!"),a=(0,i.Z)({},V),q(a),Y(!1),E(null);case 14:n.next=20;break;case 16:n.prev=16,n.t1=n.catch(0),console.log("Failed to fetch trip member",n.t1),401==n.t1.response.status&&(localStorage.removeItem("access_token"),e("/auth/login"));case 20:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(){return n.apply(this,arguments)}}();return(0,k.useEffect)((function(){function e(){return(e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.k9.getAll(V);case 2:n=e.sent,N(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[V]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(u.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,S.jsxs)(l.Z,{sx:{mt:1,mb:1},textAlign:"right",children:[(0,S.jsx)(o.Z,{id:"search",type:"search",label:"Search",value:P,onChange:function(e){M(e.target.value),q((0,i.Z)((0,i.Z)({},V),{},{memberName:e.target.value}))},sx:{width:400}}),(0,S.jsx)(s.Z,{variant:"outlined",onClick:function(e){M(e.target.value),q((0,i.Z)((0,i.Z)({},V),{},{memberName:e.target.value}))},sx:{height:42},children:"Search"})]}),(0,S.jsx)(f.Z,{children:(0,S.jsxs)(d.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,S.jsx)(p.Z,{children:(0,S.jsxs)(x.Z,{children:[w.map((function(e){return(0,S.jsx)(h.Z,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)})),(0,S.jsx)(h.Z,{align:"center",children:"Confirmed"},"confirm"),(0,S.jsx)(h.Z,{align:"center",children:"Edit || Delete"},"edit")]})}),(0,S.jsx)(m.Z,{children:B.map((function(n){return(0,S.jsxs)(x.Z,{hover:!0,role:"checkbox",tabIndex:n.memberId,children:[w.map((function(t){var r=n[t.id];return t.onclick?(0,S.jsx)(h.Z,{align:t.align,onClick:function(){return t=n.memberId,void e("/admin/tripMemberView/".concat(t));var t},children:t.format&&"number"===typeof r?t.format(r):r},t.id):(0,S.jsx)(h.Z,{align:t.align,children:t.format&&"number"===typeof r?t.format(r):r},t.id)})),(0,S.jsx)(h.Z,{align:"center",children:"Y"===n.Confirmation?"Yes":(0,S.jsx)(s.Z,{variant:"outlined",value:n.memberId,onClick:function(e){return Q(e.target.value)},color:"primary",children:"Send confirm mail"})},"confirm_".concat(n.memberId)),(0,S.jsxs)(h.Z,{align:"center",children:[(0,S.jsx)(s.Z,{variant:"outlined",value:n.memberId,onClick:function(n){return t=n.target.value,void e("/admin/tripMemberUpdate/".concat(O,"/").concat(t));var t},color:"primary",children:"Edit"}),(0,S.jsx)(s.Z,{variant:"outlined",value:n.memberId,onClick:function(e){return function(e){Y(!0),E(e)}(e.target.value)},color:"error",children:"Delete"})]},"edit_".concat(n.memberId))]},n.memberId)}))})]})}),(0,S.jsx)(g.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:J,rowsPerPage:V.pageSize,page:V.pageIndex,onPageChange:function(e,n){q((0,i.Z)((0,i.Z)({},V),{},{pageIndex:n}))},onRowsPerPageChange:function(e){q((0,i.Z)((0,i.Z)({},V),{},{pageIndex:0,pageSize:+e.target.value}))}})]}),(0,S.jsxs)(I.ZP,{container:!0,sx:{mt:2},children:[(0,S.jsx)(I.ZP,{item:!0,xs:6,children:(0,S.jsx)(s.Z,{variant:"outlined",onClick:function(){e("/admin/tripDetail/".concat(O))},children:"Return to Detail"})}),(0,S.jsx)(I.ZP,{item:!0,xs:6,textAlign:"right",children:(0,S.jsx)(s.Z,{variant:"contained",onClick:function(){e("/admin/tripMemberCreate/".concat(O))},children:"Create"})})]}),(0,S.jsxs)(Z.Z,{open:G,onClose:K,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,S.jsx)(v.Z,{id:"alert-dialog-title",children:"Do you want to delete this member?"}),(0,S.jsxs)(b.Z,{children:[(0,S.jsx)(s.Z,{variant:"contained",onClick:K,children:"Cancel"}),(0,S.jsx)(s.Z,{variant:"contained",color:"error",onClick:T,autoFocus:!0,children:"Confirm"})]})]})]})}}}]);
//# sourceMappingURL=364.62872c00.chunk.js.map