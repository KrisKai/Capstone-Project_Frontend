"use strict";(self.webpackChunkjourney_sick=self.webpackChunkjourney_sick||[]).push([[829],{15829:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var i=n(74165),r=n(15861),a=n(1413),l=n(29439),c=n(64554),o=n(93006),s=n(5849),d=n(4841),u=n(15416),p=n(62155),h=n(68745),g=n(55261),x=n(22041),f=n(5446),Z=n(9195),m=n(5574),v=n(77386),j=n(65661),k=n(71285),b=n(72791),C=n(57689),y=n(75985),S=n(80184),w=[{id:"tripName",label:"Trip Name",minWidth:100,onclick:!0},{id:"tripBudget",label:"Trip Budget",minWidth:100,align:"center",format:function(e){return e.toLocaleString("en-US")}},{id:"endLocationName",label:"Destination",minWidth:170,align:"center"},{id:"tripStatus",label:"Trip Status",minWidth:130,align:"center"}];function I(){var e=(0,C.s0)(),t=(0,b.useState)(""),n=(0,l.Z)(t,2),I=n[0],D=n[1],T=(0,b.useState)(!1),O=(0,l.Z)(T,2),P=O[0],A=O[1],N=(0,b.useState)(""),W=(0,l.Z)(N,2),F=W[0],z=W[1],E=(0,b.useState)({listOfTrip:[],numOfTrip:0}),_=(0,l.Z)(E,2),B=_[0],L=_[1],R=(0,b.useState)({pageIndex:0,pageSize:10,tripName:""}),U=(0,l.Z)(R,2),Y=U[0],G=U[1],H=B.listOfTrip,M=B.numOfTrip,V=function(){A(!1)},q=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(){var n,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.YO.delete(F||"");case 3:n=t.sent,t.t0=n.Code,t.next="G001"===t.t0?7:"D001"===t.t0?8:9;break;case 7:case 8:return t.abrupt("return",y.Am.error(n.Message));case 9:y.Am.success("Remove trip successfully!"),r=(0,a.Z)({},Y),G(r),A(!1),z(null);case 14:t.next=20;break;case 16:t.prev=16,t.t1=t.catch(0),console.log("Failed to fetch trip",t.t1),401==t.t1.response.status&&(localStorage.removeItem("access_token"),e("/auth/login"));case 20:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(){return t.apply(this,arguments)}}();return(0,b.useEffect)((function(){function e(){return(e=(0,r.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.YO.getAll(Y);case 2:t=e.sent,L(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Y]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(d.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,S.jsxs)(c.Z,{sx:{mt:1,mb:1},textAlign:"right",children:[(0,S.jsx)(o.Z,{id:"search",type:"search",label:"Search",value:I,onChange:function(e){D(e.target.value),G((0,a.Z)((0,a.Z)({},Y),{},{tripName:e.target.value}))},sx:{width:400}}),(0,S.jsx)(s.Z,{variant:"outlined",onClick:function(e){D(e.target.value),G((0,a.Z)((0,a.Z)({},Y),{},{tripName:e.target.value}))},sx:{height:42},children:"Search"})]}),(0,S.jsx)(g.Z,{children:(0,S.jsxs)(u.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,S.jsx)(x.Z,{children:(0,S.jsxs)(Z.Z,{children:[w.map((function(e){return(0,S.jsx)(h.Z,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)})),(0,S.jsx)(h.Z,{align:"center",children:"Show Detail"},"detail"),(0,S.jsx)(h.Z,{align:"center",children:"Edit || Delete"},"edit")]})}),(0,S.jsx)(p.Z,{children:H.map((function(t){return(0,S.jsxs)(Z.Z,{hover:!0,role:"checkbox",tabIndex:t.tripId,children:[w.map((function(n){var i=t[n.id];return(0,S.jsx)(S.Fragment,{children:n.onclick?(0,S.jsx)(h.Z,{align:n.align,onClick:function(){return n=t.tripId,void e("/admin/tripView/".concat(n));var n},style:{textDecoration:"underline"},children:n.format&&"number"===typeof i?n.format(i):i},n.id):(0,S.jsx)(h.Z,{align:n.align,children:n.format&&"number"===typeof i?n.format(i):i},n.id)})})),(0,S.jsx)(h.Z,{align:"center",children:(0,S.jsx)(s.Z,{variant:"outlined",value:t.tripId,onClick:function(t){return n=t.target.value,void e("/admin/tripDetail/".concat(n));var n},color:"primary",children:"About Trip"})},"detail"),(0,S.jsxs)(h.Z,{align:"center",children:[(0,S.jsx)(s.Z,{variant:"outlined",value:t.tripId,onClick:function(t){return n=t.target.value,void e("/admin/tripUpdate/".concat(n));var n},color:"primary",children:"Edit"}),(0,S.jsx)(s.Z,{variant:"outlined",value:t.tripId,onClick:function(e){return function(e){A(!0),z(e)}(e.target.value)},color:"error",children:"Delete"})]},"edit")]},t.tripId)}))})]})}),(0,S.jsx)(f.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:M,rowsPerPage:Y.pageSize,page:Y.pageIndex,onPageChange:function(e,t){G((0,a.Z)((0,a.Z)({},Y),{},{pageIndex:t}))},onRowsPerPageChange:function(e){G((0,a.Z)((0,a.Z)({},Y),{},{pageIndex:0,pageSize:+e.target.value}))}})]}),(0,S.jsx)(c.Z,{sx:{mt:2},textAlign:"right",children:(0,S.jsx)(s.Z,{variant:"contained",onClick:function(){e("/admin/tripCreate")},children:"Create"})}),(0,S.jsxs)(m.Z,{open:P,onClose:V,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,S.jsx)(j.Z,{id:"alert-dialog-title",children:"Do you want to delete this user?"}),(0,S.jsxs)(v.Z,{children:[(0,S.jsx)(s.Z,{variant:"contained",onClick:V,children:"Cancel"}),(0,S.jsx)(s.Z,{variant:"contained",color:"error",onClick:q,autoFocus:!0,children:"Confirm"})]})]})]})}}}]);
//# sourceMappingURL=829.4c9613c0.chunk.js.map