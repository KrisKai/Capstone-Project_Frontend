"use strict";(self.webpackChunkjourney_sick=self.webpackChunkjourney_sick||[]).push([[911],{49911:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var r=t(74165),a=t(15861),i=t(1413),s=t(29439),c=t(72791),l=t(64554),o=t(93006),u=t(5849),d=t(4841),h=t(15416),f=t(62155),g=t(68745),x=t(55261),v=t(22041),Z=t(5446),m=t(9195),p=t(5574),j=t(77386),k=t(65661),C=t(71285),w=t(57689),I=t(75985),b=t(48347),y=t(29452),A=t(80184),S=[{id:"username",label:"UserName",minWidth:100,onclick:!0},{id:"fullname",label:"Full Name",minWidth:150,align:"center"},{id:"role",label:"Role",minWidth:100,align:"center"},{id:"email",label:"Email",minWidth:170,align:"center"},{id:"activeStatus",label:"Active Status",minWidth:100,align:"center"}];function P(){var e=(0,w.s0)(),n=(0,c.useState)(!1),t=(0,s.Z)(n,2),P=t[0],E=t[1],N=(0,c.useState)(""),B=(0,s.Z)(N,2),F=B[0],D=B[1],U=(0,c.useState)({pageIndex:0,pageSize:10,userName:""}),W=(0,s.Z)(U,2),R=W[0],V=W[1],G=(0,c.useState)({listOfUser:[],numOfUser:0}),O=(0,s.Z)(G,2),T=O[0],z=O[1],_=T.listOfUser,H=T.numOfUser,K=(0,b.C)(y.HF),M=Boolean("Admin"===K.role),Q=(0,c.useState)(""),q=(0,s.Z)(Q,2),J=q[0],L=q[1],X=function(){E(!1)},Y=function(e){(e.type&&"click"===e.type||!e)&&V((0,i.Z)((0,i.Z)({},R),{},{userName:J}))},$=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.BG.reset(n);case 2:e.sent>0?I.Am.success("Change Password To Qwe1234!"):I.Am.error("Reset Password Failed!");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),ee=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n,t){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.BG.changeStatus({userId:n,ActiveStatus:t});case 2:a=e.sent,e.t0=a.Code,e.next="G001"===e.t0?6:"U001"===e.t0?7:"I001"===e.t0?8:"V001"===e.t0?9:10;break;case 6:case 7:case 8:case 9:return e.abrupt("return",I.Am.error(a.Message));case 10:a>0&&(I.Am.success("Change Status Successed!"),window.location.reload(!1));case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ne=function(){var n=(0,a.Z)((0,r.Z)().mark((function n(){var t;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,C.BG.delete(F||"");case 3:I.Am.success("Remove user successfully!"),t=(0,i.Z)({},R),V(t),E(!1),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("Failed to fetch user",n.t0),401===n.t0.response.status&&(localStorage.removeItem("access_token"),e("/auth/login"));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();return(0,c.useEffect)((function(){function e(){return(e=(0,a.Z)((0,r.Z)().mark((function e(){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.BG.getAll(R);case 2:n=e.sent,z(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[R]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(d.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,A.jsxs)(l.Z,{sx:{mt:1,mb:1},textAlign:"right",children:[(0,A.jsx)(o.Z,{id:"search",type:"search",label:"Search",value:J,onKeyDown:Y,onChange:function(e){L(e.target.value)},sx:{width:400}}),(0,A.jsx)(u.Z,{variant:"outlined",onClick:Y,sx:{height:42},children:"Search"})]}),(0,A.jsx)(x.Z,{children:(0,A.jsxs)(h.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,A.jsx)(v.Z,{children:(0,A.jsxs)(m.Z,{children:[S.map((function(e){return(0,A.jsx)(g.Z,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)})),M&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(g.Z,{align:"center",children:"Change Status"},"status"),(0,A.jsx)(g.Z,{align:"center",children:"Reset Password"},"reset")]}),(0,A.jsx)(g.Z,{align:"center",children:"Edit || Delete"},"edit")]})}),(0,A.jsx)(f.Z,{children:null===_||void 0===_?void 0:_.map((function(n){return(0,A.jsxs)(m.Z,{hover:!0,role:"checkbox",tabIndex:n.userId,children:[S.map((function(t){var r=n[t.id];return t.onclick?(0,A.jsx)(g.Z,{align:t.align,style:{textDecoration:"underline"},onClick:function(){return t=n.userId,void e("/admin/userView/".concat(t));var t},children:t.format&&"number"===typeof r?t.format(r):r},t.id):(0,A.jsx)(g.Z,{align:t.align,children:t.format&&"number"===typeof r?t.format(r):r},t.id)})),M&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(g.Z,{align:"center",children:["ACTIVE"!==n.ActiveStatus&&(0,A.jsx)(u.Z,{variant:"outlined",value:n.userId,onClick:function(e){return ee(e.target.value,"ACTIVE")},color:"primary",children:"Active"}),"INACTIVE"!==n.ActiveStatus&&(0,A.jsx)(u.Z,{variant:"outlined",value:n.userId,onClick:function(e){return ee(e.target.value,"INACTIVE")},color:"warning",children:"Inactive"}),"BANNED"!==n.ActiveStatus&&(0,A.jsx)(u.Z,{variant:"outlined",value:n.userId,onClick:function(e){return ee(e.target.value,"BANNED")},color:"error",children:"Banned"})]},"status"),(0,A.jsx)(g.Z,{align:"center",children:(0,A.jsx)(u.Z,{variant:"outlined",value:n.userId,onClick:function(e){return $(e.target.value)},color:"success",children:"Reset Password"})},"reset")]}),(0,A.jsxs)(g.Z,{align:"center",children:[(0,A.jsx)(u.Z,{variant:"outlined",value:n.userId,onClick:function(n){return t=n.target.value,void e("/admin/userUpdate/".concat(t));var t},color:"primary",children:"Edit"}),(0,A.jsx)(u.Z,{variant:"outlined",value:n.userId,onClick:function(e){return function(e){E(!0),D(e)}(e.target.value)},color:"error",children:"Delete"})]},"edit")]},n.userId)}))})]})}),(0,A.jsx)(Z.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:H,rowsPerPage:R.pageSize,page:R.pageIndex,onPageChange:function(e,n){V((0,i.Z)((0,i.Z)({},R),{},{pageIndex:n}))},onRowsPerPageChange:function(e){V((0,i.Z)((0,i.Z)({},R),{},{pageIndex:0,pageSize:+e.target.value}))}})]}),(0,A.jsx)(l.Z,{sx:{mt:2},textAlign:"right",children:(0,A.jsx)(u.Z,{variant:"contained",onClick:function(){e("/admin/userCreate")},children:"Create"})}),(0,A.jsxs)(p.Z,{open:P,onClose:X,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,A.jsx)(k.Z,{id:"alert-dialog-title",children:"Do you want to delete this user?"}),(0,A.jsxs)(j.Z,{children:[(0,A.jsx)(u.Z,{variant:"contained",onClick:X,children:"Cancel"}),(0,A.jsx)(u.Z,{variant:"contained",color:"error",onClick:ne,autoFocus:!0,children:"Confirm"})]})]})]})}}}]);
//# sourceMappingURL=911.77f44ac3.chunk.js.map